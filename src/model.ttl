@prefix rdfl: <https://w3id.org/rdf-lens/ontology#>.
@prefix rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#>.
@prefix xsd: <http://www.w3.org/2001/XMLSchema#>.
@prefix sh: <http://www.w3.org/ns/shacl#>.
@prefix rdfc: <https://w3id.org/rdf-connect#>.

_:id sh:path ( );
  sh:name "id";
  sh:minCount 1;
  sh:maxCount 1;
  sh:datatype xsd:any.

[ ] a sh:NodeShape;
  sh:targetClass <Pipeline>;
  sh:property _:id, [
    sh:path rdfc:consistsOf;
    sh:name "parts";
    sh:class <PipelinePart>;
  ].

[ ] a sh:NodeShape;
  sh:targetClass <PipelinePart>;
  sh:property [
    sh:path rdfc:instantiates;
    sh:name "instantiator";
    sh:class rdfl:TypedExtract;
    sh:maxCount 1;
    sh:minCount 1;
  ], [
    sh:path rdfc:processor;
    sh:name "processors";
    sh:class <SmallProc>;
  ].

[ ] a sh:NodeShape;
  sh:targetClass <SmallProc>;
  sh:property _:id, [
    sh:path rdf:type;
    sh:name "type";
    sh:datatype xsd:iri;
    sh:minCount 1;
    sh:maxCount 1;
  ].

[ ] a sh:NodeShape;
  sh:targetClass rdfc:Runner;
  sh:property _:id, [
    sh:name "handles";
    sh:path rdfc:handlesSubjectsOf;
    sh:datatype xsd:iri;
    sh:minCount 1;
    sh:maxCount 1;
  ], [
    sh:path rdfc:command;
    sh:name "command";
    sh:datatype xsd:string;
    sh:maxCount 1;
    sh:minCount 1;
  ], [
    sh:path ( );
    sh:name "orchestrator";
    sh:minCount 1;
    sh:maxCount 1;
    sh:class rdfc:Orchestrator;
  ].

[ ] a sh:NodeShape;
  sh:targetClass rdfc:TestRunner;
  sh:property _:id, [
    sh:name "handles";
    sh:path rdfc:handlesSubjectsOf;
    sh:datatype xsd:iri;
    sh:minCount 1;
    sh:maxCount 1;
  ], [
    sh:path ( );
    sh:name "orchestrator";
    sh:minCount 1;
    sh:maxCount 1;
    sh:class rdfc:Orchestrator;
  ].

[ ] a sh:NodeShape;
  sh:targetClass rdfc:Reader.

[ ] a sh:NodeShape;
  sh:targetClass rdfc:Writer.

